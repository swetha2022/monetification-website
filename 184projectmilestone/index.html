<html>
	<head>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=default'></script>
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
		<style>
			h1 {
				text-align: center;
			}

			.container {
				margin: 0 auto;
				padding: 60px 20%;
			}

			figure {
				text-align: center;
			}

			img {
				display: inline-block;
			}

			body {
				font-family: 'Inter', sans-serif;
			}
		</style>
	</head>
	<body>
		<div class="container">
		<h1>Monet-ification</h1>
		<div style="text-align: center;">Names: Rohan Aanegola, Swetha Rajkumar, Inas Zulaikha Anwar, Mihir Rao</div>

		<br>
		Link to Webpage: <a href="https://swetha2022.github.io/monetification-website/184projectmilestone/">https://swetha2022.github.io/monetification-website/184projectmilestone/</a><br>
        Link to Presentation Slides: <a href="https://docs.google.com/presentation/d/1A60O-lusOFJWJjtaC7iy3ZVPK37Pw2YcsaYU_26AQHw/edit?usp=sharing">https://docs.google.com/presentation/d/1A60O-lusOFJWJjtaC7iy3ZVPK37Pw2YcsaYU_26AQHw/edit?usp=sharing</a><br>
        Link to Recording: <a href="https://drive.google.com/file/d/1OMpukEdlFDMvbpen4X5DGznMRdn7cy19/view?usp=sharing">https://drive.google.com/file/d/1OMpukEdlFDMvbpen4X5DGznMRdn7cy19/view?usp=sharing</a>
        Link to Recording Slides: <a href="https://docs.google.com/presentation/d/1nfl5qphP929bE5movQ1QJyIsSEbye_AqZ3orOLnOJ6w/edit?usp=sharing">https://docs.google.com/presentation/d/1nfl5qphP929bE5movQ1QJyIsSEbye_AqZ3orOLnOJ6w/edit?usp=sharing</a><br>

		<br>

		<!--
		We've already added one heading per part, to make your write-up as navigable when grading. Please fit your write-up within these sections!
		-->
		<h2>Current Accomplishments</h2>

		<p>We developed the first version of our generative painting algorithm that reconstructs a reference image by iteratively adding ellipses to a blank canvas. The approach aims to imitate Claude Monet's work, and relies on a custom loss function that draws ellipses based on regions of the canvas that deviate most from the target image. At each step, the algorithm estimates the appropriate color for the selected location and draws an oval, progressively building the image. To improve efficiency and prevent redundant rendering, we implemented a bias mask that tracks untouched pixels. This prioritizes parts of our canvas that are unpainted. While the method successfully produces a splotchy, impressionistic aesthetic reminiscent of Monet, it struggles with detail preservation and color accuracy. We also created a new color palette based on the colors most commonly used by Monet in his paintings (Titanium White, Cadmium Yellow Light, Cadmium Yellow, Viridian Green, Emerald Green, French Ultramarine, Cobalt Blue, Madder Red, Vermilion, and Ivory Black) along with additional color blends generated by linearly interpolating between each pair of colors in the base palette. To map colors from the reference image to our blended palette, we calculate soft probabilities that represent how "similar" each pixel color is to the colors in the palette. When rasterizing an ellipse on the screen, we convert each pixel from the reference image inside the ellipse to its closest match in the Monet palette by selecting the color with the highest soft probability. We then set the ellipse color to the average of these matched colors. To vary ellipse sizes according to image detail, we implemented a more advanced stroke generation method inspired by algorithms used to render images using Pointillism techniques. The algorithm first converts the input image to grayscale and computes its gradient using a defined vector field. This gradient is then smoothed using a gradient_smoothing_radius of 15 (a tunable parameter). For each randomly selected candidate center, the local gradient direction and a stroke_scale of 4 (also tunable) is used to determine the angle and size of the ellipse. These dynamic adjustments to ellipse size better adapt to the frequency content of each region by ensuring that regions in the image with sharper or faster changes produce smaller ellipses, while areas with minimal variation result in larger ellipses. This ultimately preserves sufficient detail in the final render. The randomness in choosing centers for each ellipse can result in uncovered white space, particularly in low-density areas. We are currently exploring the next version of our algorithm that does a better job of imitating Monet's work.</p>

		<h2>Preliminary Results</h2>

        <p>Below are some images depicting different images and our Monetified renders.</p>
		
		<div style="display: flex; flex-direction: column; align-items: center;">
			<table style="width: 100%; text-align: center; border-collapse: collapse;">
              <tr>
				<td style="text-align: center;">
				  <img src="./imgs/image3.jpg" width="400px"/>
				  <figcaption><i>Trees</i></figcaption>
				</td>
				<td style="text-align: center;">
				  <img src="./renders/render_image3.jpg" width="400px"/>
				  <figcaption><i>Monetified Trees Render</i></figcaption>
				</td>
			  </tr>
			</table>
		</div>

		<h2>Progress Reflection and Updated Work Plan</h2>

		<p>So far, our baseline algorithm focuses on minimizing the loss between the image we generate and the reference image after converting its color pixels to their closest equivalents in our Monet palette. We also experimented with several techniques to make the rendered image more closely resemble Monet’s style. For instance, we constructed the image using many smaller ellipses to mimic Monet’s subtle, discrete color transitions, employed a carefully curated color palette, and implemented advanced stroke generation to adjust ellipse size based on the local frequency of the surrounding area. Overall, our baseline results are quite promising. Moving forward, we plan to explore additional enhancements, such as improved color blending, incorporating primitives beyond ellipses, simulating brush stroke characteristics, and leveraging neural networks to achieve better results.</p>
		<br><br>

		<b>Future Work Plan:</b><br><br>

		April 18 to 25:
		<ul>
			<li>Adapt stroke size and shape to better render fine details like thin lines</li>
			<li>Use texture mapping to simulate real paint strokes and overlaps</li>
			<li>Incorporate blends between multiple colors, rather than limiting to just two</li>
		</ul>
		
		April 26 to May 1:
		<ul>
=			<li>Train neural networks models on Monet's work</li>
			<li>Incorporate learned models into the loss function</li>
		</ul>

		May 1 to May 4:
		<ul>
			<li>Final submission</li>
		</ul>
		  

		<!-- <h2>Resources</h2>
		
		<ul>
            <li>Pointillism: <a href ="https://github.com/matteo-ronchetti/Pointillism/tree/master">https://github.com/matteo-ronchetti/Pointillism/tree/master</a></li>
            <li>Sketching with OpenCV: <a href="https://medium.com/data-science/painting-and-sketching-with-opencv-in-python-4293026d78b">https://medium.com/data-science/painting-and-sketching-with-opencv-in-python-4293026d78b</a></li>
			<li>Stroke based rendering: <a href="https://www.cs.ucdavis.edu/~ma/SIGGRAPH02/course23/notes/S02c23_3.pdf">https://www.cs.ucdavis.edu/~ma/SIGGRAPH02/course23/notes/S02c23_3.pdf</a></li>
			<li>Characteristics of impressionism for reference: <a href="https://arthistorywithalder.com/impressionism-art-characteristics/">https://arthistorywithalder.com/impressionism-art-characteristics/</a></li>
			<li>PBRT to refer to in times of crisis: <a href="https://www.pbrt.org/">https://www.pbrt.org/</a></li>
			<li>OpenCV: <a href="https://opencv.org/">https://opencv.org/</a></li>
            <li>Monet Palette: <a href="https://www.overstockart.com/blog/analyzing-claude-monet-oil-paintings-colors-subjects-and-misconceptions/?srsltid=AfmBOopZ6UeVva4BdzFxD8vAmUKjfVRveC5rqbAPYdhM7sCOm8r6zvDF">https://www.overstockart.com/blog/analyzing-claude-monet-oil-paintings-colors-subjects-and-misconceptions/?srsltid=AfmBOopZ6UeVva4BdzFxD8vAmUKjfVRveC5rqbAPYdhM7sCOm8r6zvDF</a></li>
            <li>Color Register: <a href="https://color-register.org/color/">https://color-register.org/color/</a></li>
            <li>HTML Color Codes: <a href="https://htmlcolorcodes.com/colors/">https://htmlcolorcodes.com/colors/</a></li>
		</ul> -->

		</div>
	</body>
</html>